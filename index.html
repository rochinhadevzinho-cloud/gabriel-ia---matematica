<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gabriel ‚Äî Chat com Mem√≥ria</title>
  <style>
    :root{
      --bg:#0b0f14; --panel:#111827; --muted:#94a3b8; --accent:#22d3ee; --accent-2:#60a5fa; --bot:#1f2937; --user:#0ea5e9;
    }
    *{box-sizing:border-box}
    body{margin:0;background:linear-gradient(120deg,#0b0f14,#0a1422);font:16px/1.4 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial;color:#e5e7eb}
    .wrap{min-height:100svh;display:grid;place-items:center;padding:24px}
    .card{width:min(900px,100%);background:rgba(17,24,39,.75);backdrop-filter:saturate(140%) blur(8px);border:1px solid rgba(255,255,255,.06);border-radius:20px;box-shadow:0 10px 40px rgba(0,0,0,.35);display:flex;flex-direction:column;overflow:hidden;animation:fadeInCard 0.7s}
    @keyframes fadeInCard {
      from { opacity: 0; transform: scale(0.98);}
      to { opacity: 1; transform: scale(1);}
    }
    header{padding:18px 20px;border-bottom:1px solid rgba(255,255,255,.06);display:flex;gap:12px;align-items:center}
    header .dot{width:10px;height:10px;border-radius:99px;background:radial-gradient(circle at 30% 30%, #7c3aed, #22d3ee);animation:dotPulse 2s infinite;}
    @keyframes dotPulse {
      0%,100%{box-shadow:0 0 0 0 #22d3ee66;}
      50%{box-shadow:0 0 8px 4px #22d3ee44;}
    }
    header h1{font-size:16px;margin:0;font-weight:600;animation:floatTitle 3s infinite;}
    @keyframes floatTitle {
      0%,100%{transform:translateY(0);}
      50%{transform:translateY(-6px);}
    }
    header p{margin:0 0 0 auto;font-size:12px;color:var(--muted)}
    .messages{height:min(60vh,560px);overflow:auto;padding:16px;display:flex;flex-direction:column;gap:12px;scroll-behavior:smooth}
    .msg{max-width:80%;padding:12px 14px;border-radius:16px;position:relative;word-wrap:break-word;white-space:pre-wrap;opacity:0;transform:translateY(20px);animation:fadeInUp .5s forwards}
    .bot{align-self:flex-start;background:var(--bot);border:1px solid rgba(255,255,255,.06);}
    .user{align-self:flex-end;background:linear-gradient(120deg,var(--user),#22d3ee);color:#001018;}
    .time{display:block;margin-top:6px;font-size:11px;color:#b6c2cf;opacity:.75}
    .inputbar{display:flex;gap:10px;padding:14px;border-top:1px solid rgba(255,255,255,.06);background:rgba(0,0,0,.25)}
    .inputbar input{flex:1;padding:12px 14px;border-radius:12px;border:1px solid rgba(255,255,255,.12);background:#0b1220;color:#e5e7eb;transition:border .2s;}
    .inputbar input:focus{border-color:var(--accent)}
    .inputbar button{padding:12px 16px;border-radius:12px;border:0;cursor:pointer;font-weight:600;color:#041016;background:linear-gradient(120deg,var(--accent),var(--accent-2));transition:box-shadow .2s,transform .2s;}
    .inputbar button:hover:not(:disabled){box-shadow:0 2px 8px rgba(34,211,238,.18);transform:scale(1.04)}
    footer{padding:10px 16px;color:var(--muted);font-size:12px;text-align:center}
    @keyframes fadeInUp {to{opacity:1; transform:translateY(0);}}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <header>
        <span class="dot"></span>
        <h1>Gabriel ‚Äî Trabalho de matematica</h1>
      </header>
      <div class="messages" id="messages"></div>
      <div class="inputbar">
        <input id="input" type="text" placeholder="Digite sua mensagem..." autocomplete="off" />
        <button id="send">Enviar</button>
      </div>
      <footer>feito por felix raphael vulgo rochinha</footer>
    </div>
  </div>

  <script>
    const API_KEY = "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"; // üîë Cole sua chave da OpenAI aqui
    const elMsgs = document.getElementById("messages");
    const elInput = document.getElementById("input");
    const elSend = document.getElementById("send");

    let conversation = []; // üß† Mem√≥ria local

    function time() {
      const d = new Date();
      return d.toLocaleTimeString([], {hour: '2-digit', minute: '2-digit'});
    }

    function bubble(text, who = 'bot') {
      const div = document.createElement('div');
      div.className = `msg ${who}`;
      div.innerText = text;
      const t = document.createElement('span');
      t.className = 'time';
      t.textContent = who === 'bot' ? `bot ‚Ä¢ ${time()}` : `voc√™ ‚Ä¢ ${time()}`;
      div.appendChild(t);
      elMsgs.appendChild(div);
      elMsgs.scrollTop = elMsgs.scrollHeight;
    }

    async function sendMessage() {
      const text = elInput.value.trim();
      if (!text) return;
      elInput.value = "";
      bubble(text, 'user');
      conversation.push({ role: "user", content: text });

      bubble("Digitando...", 'bot');
      try {
        const response = await fetch("https://api.openai.com/v1/responses", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            "Authorization": "Bearer " + API_KEY
          },
          body: JSON.stringify({
            model: "gpt-4.1-mini",
            input: conversation.map(m => `${m.role === "user" ? "Usu√°rio" : "Bot"}: ${m.content}`).join("\n")
          })
        });

        const data = await response.json();
        document.querySelector('.bot:last-child').remove();
        const output = data.output?.[0]?.content?.[0]?.text || "‚ö†Ô∏è Erro: resposta vazia.";
        bubble(output, 'bot');
        conversation.push({ role: "assistant", content: output });
      } catch (e) {
        document.querySelector('.bot:last-child').remove();
        bubble("‚ö†Ô∏è Erro ao conectar com a IA. Verifique a chave de API.", "bot");
      }
    }

    elSend.addEventListener("click", sendMessage);
    elInput.addEventListener("keydown", e => { if (e.key === "Enter") sendMessage(); });

    // Mensagem inicial
    bubble("Ol√°! Sou o Gabriel uma ia feita por felix raphael em colabora√ß√£o com enthony Gabriel, Icaro Ramos e Caio damasceno.", "bot");
  </script>
</body>
</html>
